# 331.1 - X.509 Certificates and Public Key Infrastructures

Key Knowledge Areas:

* Understand X.509 certificates, X.509 certificate lifecycle, X.509 certificate fields and X.509v3 certificate extensions
* Understand trust chains and public key infrastructures, including certificate transparency
* Generate and manage public and private keys
* Create, operate and secure a certification authority
* Request, sign and manage server and client certificates
* Revoke certificates and certification authorities
* Basic feature knowledge of Let's Encrypt, ACME and certbot
* Basic feature knowledge of CFSSL

Partial list of the used files, terms and utilities:

* openssl (including relevant subcommands)
* OpenSSL configuration
* PEM, DER, PKCS
* CSR
* CRL
* OCSP

## Terms

### PEM, DER, PKCS
* [PEM](https://en.wikipedia.org/wiki/PEM_file)
* [DER](https://en.wikipedia.org/wiki/X.690#DER_encoding)
* [PKCS](https://en.wikipedia.org/wiki/PKCS)

### CSR
[certificate signing request](https://en.wikipedia.org/wiki/Certificate_signing_request)

### CRL
[certificate revocation list](https://en.wikipedia.org/wiki/Certificate_revocation_list)

### OCSP
[online certificate status protocol](https://en.wikipedia.org/wiki/Online_Certificate_Status_Protocol)

## Files

### OpenSSL configuration
/etc/pki/tls/openssl.cnf

## Utilities

### openssl
```
man 1 openssl
man 1 genpkey
```

## Notes

### Certificate Transparency
* [Certificate Transparency](https://en.wikipedia.org/wiki/Certificate_Transparency)

### Public and private keys
* [Public key certificate](https://en.wikipedia.org/wiki/Public_key_certificate)
* commands:
  * `openssl genpkey`: generates private key or parameters
  * `openssl list -public-key-algorithms`: lists supported algorithms
  * `openssl pkeyparam`: print and validate parameters

parameter generation:
  * valid algorithms: DH, DSA and EC
  * examples:
    * `openssl genpkey -genparam -algorithm DH -out dh-params.pem -outform PEM -pkeyopt dh_paramgen_prime_len:2048`
    * `openssl genpkey -genparam -algorithm DSA -out dsa-params.pem -outform PEM -pkeyopt dsa_paramgen_bits:2048`
    * `openssl genpkey -genparam -algorithm EC -out ec-params.pem -outform PEM -pkeyopt ec_paramgen_curve:P-256`

parameter validation:
  * examples:
    * `openssl pkeyparam -check -in dh-params.pem -text`
    * `openssl pkeyparam -check -in dsa-params.pem -noout`
    * `openssl pkeyparam -in ec-params.pem -text`

### Certification Authority
* [Certificate Authority](https://en.wikipedia.org/wiki/Certificate_authority)

### Best practices
* [Qualys SSL Labs: Best Practices](https://github.com/ssllabs/research/wiki/SSL-and-TLS-Deployment-Best-Practices)
* [Mozilla wiki: Security/Server Side TLS](https://wiki.mozilla.org/Security/Server_Side_TLS)
